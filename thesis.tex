% !TEX encoding = UTF-8 Unicode
%
%
% UCSD Doctoral Dissertation Template
% -----------------------------------
% http://ucsd-thesis.googlecode.com
%
%
% ----------------------------------------------------------------------
% WARNING: 
%
%   This template has not endorced by OGS or any other official entity.
%   The official formatting guide can be obtained from OGS.
%   It can be found on the web here:
%   http://ogs.ucsd.edu/AcademicAffairs/Documents/Dissertations_Theses_Formatting_Manual.pdf
%
%   No guaranty is made that this LaTeX class conforms to the official UCSD guidelines.
%   Make sure that you check the final document against the Formatting Manual.
%  
%   That being said, this class has been routinely used for successful 
%   publication of doctoral theses.  
%
%   The ucsd.cls class files are only valid for doctoral dissertations.
%
%
% ----------------------------------------------------------------------
% GETTING STARTED:
%
%   Lots of information can be found on the project wiki:
%   http://code.google.com/p/ucsd-thesis/wiki/GettingStarted
%
%
%   To make a pdf from this template use the command:
%     pdflatex template
%
%
%   To get started please read the comments in this template file 
%   and make changes as appropriate.
%
%   If you successfully submit a thesis with this package please let us
%   know.
%
%
% ----------------------------------------------------------------------
% KNOWN ISSUES:
%
%   Currently only the 12pt size conforms to the UCSD requirements.
%   The 10pt and 11pt options make the footnote fonts too small.
%
%
% ----------------------------------------------------------------------
% HELP/CONTACT:
%
%   If you need help try the ucsd-thesis google group:
%   http://groups.google.com/group/ucsd-thesis
%
%
% ----------------------------------------------------------------------
% BUGS:
%
%   Please report all bugs at:
%   http://code.google.com/p/ucsd-thesis/issues/list
%
%
% ----------------------------------------------------------------------
% More control of the formatting of your thesis can be achieved through
% modifications of the included LaTeX class files:
%
%   * ucsd.cls    -- Class file
%   * uct10.clo   -- Configuration files for font sizes 10pt, 11pt, 12pt
%     uct11.clo                            
%     uct12.clo
%
% ----------------------------------------------------------------------



% Setup the documentclass 
% default options: 12pt, oneside, final
%
% fonts: 10pt, 11pt, 12pt -- are valid for UCSD dissertations.
% sides: oneside, twoside -- note that two-sided theses are not accepted 
%                            by OGS.
% mode: draft, final      -- draft mode switches to single spacing, 
%                            removes hyperlinks, and places a black box
%                            at every overfull hbox (check these before
%                            submission).
% chapterheads            -- Include this if you want your chapters to read:
%                              Chapter 1
%                              Title of Chapter
%
%                            instead of
%                              1 Title of Chapter
\documentclass[12pt,chapterheads]{ucsd}
% \documentclass[12pt,chapterheads]{ucsd}

% Include all packages you need here.  
% Some standard options are suggested below.
%
% See the project wiki for information on how to use 
% these packages. Other useful packages are also listed there.
%
%   http://code.google.com/p/ucsd-thesis/wiki/GettingStarted

% Compile without creating PDF output to speed up error checking
% \usepackage{syntonly}
% \syntaxonly

%% AMS PACKAGES - Chances are you will want some or all 
%    of these if writing a dissertation that includes equations.
%  \usepackage{amsmath, amscd, amssymb, amsthm}
\usepackage{amsmath,bm}

%% GRAPHICX - This is the standard package for 
%    including graphics for latex/pdflatex.
\usepackage{scrextend}
\usepackage{pslatex}
\usepackage{graphicx}

\usepackage{subfig}
\usepackage{floatrow}
\floatsetup[table]{capposition=above,captionskip=-10pt}


%\usepackage{subcaption}
\usepackage{xcolor}
\usepackage{adjustbox}
\usepackage{verbatim}
\usepackage{amssymb}
%% CAPTION
% This overrides some of the ugliness in ucsd.cls and
% allows the text to be double-spaced while letting figures,
% tables, and footnotes to be single-spaced--all OGS requirements.
% NOTE: Must appear after graphics and ams math
\makeatletter
\gdef\@ptsize{2}% 12pt documents
\let\@currsize\normalsize
\makeatother
\usepackage{setspace}
\doublespace
\usepackage[font=small, width=0.9\textwidth]{caption}

\usepackage{longtable}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{minitoc}

%% CITATIONS
% break long URLs

\usepackage[
url=false,
doi=false,
alldates=year,  % in case citation includes month
% urldate=short,
refsegment=chapter,
maxcitenames=2,
maxbibnames=200,
backend=biber,
style=authoryear,
uniquename=false,
uniquelist=false,
%citestyle=authoryearbracket,
giveninits=true,
natbib=true,
]{biblatex}

\DefineBibliographyStrings{english}{%
  andothers = {\textit{et al}\adddot}
}

\DeclareNameAlias{author}{family-given}
\renewcommand{\postnotedelim}{\addsemicolon\addspace}
\addbibresource{references.bib}
%\bibliographystyle{apalike}

%\usepackage[backref=true,refsection=chapter]{biblatex}
% Break on URL numbers if too wide
\usepackage{xurl}
\def\UrlBreaks{\do\/\do-}
\setcounter{biburllcpenalty}{8000}
\setcounter{biburlucpenalty}{8000}
\setcounter{biburlnumpenalty}{8000}


% Sets citation format
% and fixes up citations madness
\usepackage{microtype}  % avoids citations that hang into the margin

% Other helpful snippets
% citep with leading "e.g., " 
\newcommand{\citeg}[1]{\citep[e.g.,][]{#1}}
% Write short author before author, useful for institutions with abbreviation.
\renewbibmacro*{begentry}{%
    \ifnameundef{shortauthor}
        {}
        {\printnames{shortauthor}%
         \addspace\textendash\space}}

%% SUBFIG - Use this to place multiple images in a
%    single figure.  Subfig will handle placement and
%    proper captioning (e.g. Figure 1.2(a))
% \usepackage{subfig}

%% TIMES FONT - replacements for Computer Modern
%%   This package will replace the default font with a
%%   Times-Roman font with math support.
% \usepackage[T1]{fontenc}
% \usepackage{mathptmx}

%% INDEX
%   Uncomment the following two lines to create an index: 
% \usepackage{makeidx}
% \makeindex
%   You will need to uncomment the \printindex line near the
%   bibliography to display the index.  Use the command
% \index{keyword} 
%   within the text to create an entry in the index for keyword.
%   To compile a LaTeX document with an index the 'makeindex'
%   command will need to be run.  See the wiki for more details.

%% HYPERLINKS
%   To create a PDF with hyperlinks, you need to include the hyperref package.
%   THIS HAS TO BE THE LAST PACKAGE INCLUDED!
%   Note that the options plainpages=false and pdfpagelabels exist
%   to fix indexing associated with having both (ii) and (2) as pages.
%   Also, all links must be black according to OGS.
%   See: http://www.tex.ac.uk/cgi-bin/texfaq2html?label=hyperdupdest
%   Note: This may not work correctly with all DVI viewers (i.e. Yap breaks).
%   NOTE: hyperref will NOT work in draft mode, as noted above.
% \usepackage[colorlinks=true, pdfstartview=FitV, 
%             linkcolor=black, citecolor=black, 
%             urlcolor=black, plainpages=false,
%             pdfpagelabels]{hyperref}
% \hypersetup{ pdfauthor = {Your Name Here}, 
%              pdftitle = {The Title of The Dissertation}, 
%              pdfkeywords = {Keywords for Searching}, 
%              pdfcreator = {pdfLaTeX with hyperref package}, 
%              pdfproducer = {pdfLaTeX} }
% \urlstyle{same}
% \usepackage{bookmark}
%\usepackage{CJKutf8}



%% FOOTNOTE-MAGIC
% Enables footnotes in tables, re-referencing the same footnote multiple times.
\usepackage{footnote}
\makesavenoteenv{tabular}
\makesavenoteenv{table}


%% TABLE FORMATTING MADNESS
% Enable all sorts of fun table tricks
\usepackage{rotating}  % Enables the sideways environment (NCPW)
\usepackage{array}  % Enables "m" tabular environment http://ctan.org/pkg/array
\usepackage{booktabs}  % Enables \toprule  http://ctan.org/pkg/array
\usepackage{multirow}
\usepackage{threeparttable}
\setlength\bibitemsep{2\itemsep}

%\urlstyle{same}
\usepackage[breaklinks,pdfencoding=auto,psdextra]{hyperref}
\PassOptionsToPackage{unicode}{hyperref}
\hypersetup{
    colorlinks,
    linkcolor={black},
    citecolor={black},
    urlcolor={black}
}
\usepackage[capitalize]{cleveref}

\begin{document}
\captionsetup{justification=justified,singlelinecheck=false}
%\begin{comment}
%% FRONT MATTER
%
%  All of the front matter.
%  This includes the title, degree, dedication, vita, abstract, etc..
%  Modify the file template_frontmatter.tex to change these pages.

\include{thesis_frontmatter}

%% DISSERTATION
% A common strategy here is to include files for each of the chapters. I.e.,
% Place the chapters in separate files: 
%   chapter1.tex, chapter2.tex
% Then use the commands:
\include{chapter1}
\include{chapter2}
\include{chapter3}
\include{chapter4}
\include{chapter5}
\include{appendices}
% Of course, if you prefer, you can just start with
%   \chapter{My First Chapter Name}
% and start typing away


%% Bibilography
\newpage
\linespread{1.0}
\tolerance 1000  % in case too wide
\emergencystretch 2em  % in case too wide
\setlength\bibitemsep{2\itemsep}
\AtNextBibliography{\normalsize}
% \addcontentsline{toc}{chapter*}{\protect\numberline{}Bibliography}
\printbibliography[title=Bibliography, heading=bibintoc]

% \endrefsegment
\end{document}